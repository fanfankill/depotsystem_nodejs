{"version":3,"sources":["webpack:///./src/views/carjoin/carjoin.vue?ed16","webpack:///src/views/carjoin/carjoin.vue","webpack:///./src/views/carjoin/carjoin.vue?c24b","webpack:///./src/views/carjoin/carjoin.vue?3225","webpack:///./src/views/carjoin/carjoin.vue?5cae"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","boxloading","slot","staticClass","staticStyle","_v","model","value","callback","$$v","carnumber1","expression","carnumber2","toaddposition","_l","item","key","descration","position","_s","fare","postcarnumber","CarportNumber","CarCost","on","addcarjoin","staticRenderFns","watch","created","setTimeout","data","carnumber","positions","freeparks","methods","getallpositons","$axios","then","console","log","res","err","getfreepot","post","checkcarnumber","vehicleNumber","xreg","test","message","type","component"],"mappings":"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","file":"js/chunk-14710f46.0a2b9205.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-skeleton',{attrs:{\"loading\":_vm.boxloading,\"animated\":\"\"}},[_c('template',{slot:\"template\"},[_c('div',{staticClass:\"left\"},[_c('el-skeleton-item',{staticStyle:{\"width\":\"100%\",\"height\":\"600px\"},attrs:{\"variant\":\"div\"}})],1)]),[_c('div',{staticClass:\"left\"},[_c('p',[_vm._v(\"进出车辆登记表\")]),_c('div',{staticClass:\"carjoinform\"},[_c('table',{staticClass:\"jointable\"},[_c('tr',[_c('td',[_vm._v(\"车牌号码：\")]),_c('td',[_c('el-input',{staticStyle:{\"width\":\"80px\",\"float\":\"left\"},attrs:{\"placeholder\":\"地区号\"},model:{value:(_vm.carnumber1),callback:function ($$v) {_vm.carnumber1=$$v},expression:\"carnumber1\"}}),_c('span',[_vm._v(\"-\")]),_c('el-input',{staticStyle:{\"width\":\"130px\"},attrs:{\"placeholder\":\"车牌号码\"},model:{value:(_vm.carnumber2),callback:function ($$v) {_vm.carnumber2=$$v},expression:\"carnumber2\"}})],1)]),_c('tr',[_c('td',[_vm._v(\"泊车区域：\")]),_c('td',[_c('el-select',{attrs:{\"placeholder\":\"请选择停车区域\"},model:{value:(_vm.toaddposition),callback:function ($$v) {_vm.toaddposition=$$v},expression:\"toaddposition\"}},_vm._l((_vm.positions),function(item){return _c('el-option',{key:item.descration,attrs:{\"label\":item.position,\"value\":item.position}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.position))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\",\"font-size\":\"13px\"}},[_vm._v(\"￥\"+_vm._s(item.fare))])])}),1)],1)]),_c('tr',[_c('td',[_vm._v(\"车位选择：\")]),_c('td',[_c('el-select',{attrs:{\"placeholder\":\"请选择车位\"},model:{value:(_vm.postcarnumber),callback:function ($$v) {_vm.postcarnumber=$$v},expression:\"postcarnumber\"}},_vm._l((_vm.freeparks),function(item){return _c('el-option',{key:item.CarportNumber,attrs:{\"label\":item.CarportNumber,\"value\":item.CarportNumber}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.CarportNumber))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\",\"font-size\":\"13px\"}},[_vm._v(\"￥\"+_vm._s(item.CarCost))])])}),1)],1)]),_c('tr',[_c('td'),_c('td',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addcarjoin}},[_vm._v(\"添加信息\")]),_c('el-button',[_vm._v(\"重置\")])],1)])])])])]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n\r\n        <el-skeleton  :loading=\"boxloading\" animated >\r\n      <template slot=\"template\">\r\n            <div class=\"left\">\r\n\r\n            <el-skeleton-item\r\n          variant=\"div\"\r\n         \r\n          style=\"width:100%;height:600px;\"\r\n        />\r\n            </div>\r\n         \r\n      </template>\r\n\r\n      <template>\r\n        <div class=\"left\">\r\n          <p>进出车辆登记表</p>\r\n          <div class=\"carjoinform\">\r\n            <table class=\"jointable\">\r\n              <tr>\r\n                <td>车牌号码：</td>\r\n                <td><el-input style=\"width:80px;float:left\" v-model=\"carnumber1\" placeholder=\"地区号\"></el-input>\r\n                <span>-</span>\r\n                 <el-input style=\"width:130px\" v-model=\"carnumber2\" placeholder=\"车牌号码\"></el-input></td>\r\n              </tr>\r\n               <tr>\r\n                <td>泊车区域：</td>\r\n                <td>\r\n                     <el-select v-model=\"toaddposition\" placeholder=\"请选择停车区域\">\r\n    <el-option\r\n      v-for=\"item in positions\"\r\n      :key=\"item.descration\"\r\n      :label=\"item.position\"\r\n      :value=\"item.position\">\r\n      <span style=\"float: left\">{{ item.position }}</span>\r\n      <span style=\"float: right; color: #8492a6; font-size: 13px\">￥{{ item.fare }}</span>\r\n    </el-option>\r\n                     </el-select>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td>车位选择：</td>\r\n                <td>\r\n                     <el-select v-model=\"postcarnumber\" placeholder=\"请选择车位\">\r\n    <el-option\r\n      v-for=\"item in freeparks\"\r\n      :key=\"item.CarportNumber\"\r\n      :label=\"item.CarportNumber\"\r\n      :value=\"item.CarportNumber\">\r\n      <span style=\"float: left\">{{ item.CarportNumber }}</span>\r\n      <span style=\"float: right; color: #8492a6; font-size: 13px\">￥{{ item.CarCost }}</span>\r\n    </el-option>\r\n                     </el-select>\r\n                </td>\r\n              </tr>\r\n              \r\n              <tr>\r\n                <td></td>\r\n                <td><el-button type=\"primary\" @click=\"addcarjoin\">添加信息</el-button><el-button>重置</el-button></td>\r\n              </tr>\r\n            </table>\r\n\r\n          </div>\r\n      </div>\r\n      </template>\r\n        </el-skeleton>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\nwatch:{\r\n  //监听泊车区域的变化来改变剩余车位\r\n  toaddposition:function(val){\r\n    console.log(val);\r\n    this.getfreepot()\r\n  }\r\n},\r\n\r\n  created:function()\r\n  {\r\n    setTimeout(()=>{\r\n      this.boxloading=false\r\n      this.getallpositons()\r\n    },1000)\r\n  },\r\n  data() {\r\n    return {\r\n      //骨架\r\n      boxloading:true,\r\n      //车牌号码\r\n      carnumber:'',\r\n\r\n      carnumber1:'',\r\n\r\n      carnumber2:'',\r\n\r\n      //进出车辆表单\r\n      toaddposition:'',\r\n      positions:[],\r\n      //剩余车辆\r\n      freeparks:[],\r\n      postcarnumber:'',\r\n    }\r\n  },\r\n  methods:{\r\n    //获取停车区域信息\r\n    getallpositons()\r\n    {\r\n      this.$axios('/getposition').then(res=>{\r\n        console.log(res);\r\n        this.positions=res.data.lists\r\n      }).catch(err=>{\r\n        console.log(err);\r\n      })\r\n    },\r\n    //获取车位区域对应空闲的车位\r\n    getfreepot()\r\n    {\r\n      this.postcarnumber=''\r\n      this.$axios.post('/selectpart',{\r\n          position:this.toaddposition,\r\n          haveCar:1,\r\n      }).then(res=>{\r\n        console.log(res);\r\n        this.freeparks=res.data\r\n      }).catch(err=>{\r\n        console.log(err);\r\n      })\r\n    },\r\n    //车牌号码的正则\r\n    checkcarnumber(vehicleNumber)\r\n    {\r\n      console.log(vehicleNumber);\r\n    var xreg=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF]$)|([DF][A-HJ-NP-Z0-9][0-9]{4}$))/;\r\n    var creg=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1}$/;\r\n    if(vehicleNumber.length == 7)\r\n    { return creg.test(vehicleNumber);}\r\n    else if(vehicleNumber.length == 8){\r\n        return xreg.test(vehicleNumber);\r\n      } else\r\n        {return false;}\r\n    },\r\n\r\n    //添加进出车辆记录\r\n    addcarjoin()\r\n    {\r\n        //拼接起来\r\n      this.carnumber=this.carnumber1+this.carnumber2\r\n\r\n       let checknumber=this.checkcarnumber(this.carnumber)\r\n        if(checknumber){\r\n      this.$axios.post('/addcarjoin',{\r\n        CarNumber:this.carnumber,\r\n        position:this.toaddposition,\r\n        CarportNumber:this.postcarnumber\r\n      }).then(res=>{\r\n        console.log(res);\r\n       if(res.data.code==1)\r\n       {\r\n         //重新获取空闲车位\r\n         this.getfreepot()\r\n\r\n          this.$message({\r\n          message: res.data.message,\r\n          type: 'success'\r\n        });\r\n       }else{\r\n          this.$message({\r\n          message: res.data.message,\r\n          type: 'error'\r\n        });\r\n       }\r\n      }).catch(err=>{\r\n        console.log(err);\r\n      })\r\n    }else{\r\n      this.$message({\r\n          message: '车牌号码不符合规范',\r\n          type: 'warning'\r\n        });\r\n    }\r\n  }\r\n}\r\n}\r\n</script>\r\n\r\n<style>\r\n.left{\r\n  text-align: center;\r\n  line-height: 40px;\r\n  height: 600px;\r\n  width: 30%;\r\n\r\n  background-color: rgb(255, 255, 255);\r\n}\r\n.jointable{\r\n  margin:auto;\r\n}\r\n.jointable tr{\r\n  height: 80px;\r\n}\r\n.jointable td{\r\n  color: gray;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./carjoin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./carjoin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./carjoin.vue?vue&type=template&id=151814a5&\"\nimport script from \"./carjoin.vue?vue&type=script&lang=js&\"\nexport * from \"./carjoin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./carjoin.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./carjoin.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./carjoin.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}